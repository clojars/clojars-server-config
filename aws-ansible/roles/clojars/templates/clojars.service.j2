# {{ ansible_managed }}
[Unit]
Description=Clojars webapp (production)
After=network.target

[Service]
User=clojars
Restart=on-failure
WorkingDirectory=/home/clojars
Environment="CLOJARS_EXTRA_CONFIG=data/conf/production_config.edn"

ExecStart=/bin/java -Dnla.node=clojars -Xmx512m -server "-XX:OnOutOfMemoryError=kill -9 %p" -cp releases/clojars-web-current.jar clojars.main 2>&1 | /sbin/cronolog -S /logs/clojars.log /logs/%Y%m/clojars.%Y-%m-%d.log

[Install]
WantedBy=multi-user.target